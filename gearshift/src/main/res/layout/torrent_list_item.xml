<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:android="http://schemas.android.com/apk/res/android">
	<data>
		<variable
			name="viewModel"
			type="org.sugr.gearshift.viewmodel.TorrentViewModel"/>
		<import type="android.view.View"/>
	</data>

	<LinearLayout
		android:layout_width="match_parent"
		android:layout_height="wrap_content"
		android:orientation="horizontal"
		android:background="?android:selectableItemBackground"
		android:minHeight="?android:listPreferredItemHeightSmall">

		<FrameLayout
			android:layout_width="wrap_content"
			android:layout_height="wrap_content"
			android:layout_marginStart="@dimen/activity_horizontal_margin"
			android:layout_marginEnd="8dp"
			android:layout_gravity="center" >

			<View
				android:alpha="0.6"
				android:layout_width="30dp"
				android:layout_height="30dp"
				android:layout_gravity="center"
				android:visibility="@{viewModel.isDirectory ? View.VISIBLE : View.GONE}"
				android:background="@drawable/ic_folder_open_grey600"/>

			<ProgressBar
				style="?android:attr/progressBarStyleHorizontal"
				android:layout_width="64dp"
				android:layout_height="64dp"
				android:indeterminate="false"
				android:progressDrawable="@drawable/circular_progress_bar"
				android:background="?android:selectableItemBackground"
				android:max="100"
				android:progress="@{viewModel.uploadProgress}"
				android:secondaryProgress="@{viewModel.downloadProgress}"/>

			<View
				android:visibility="@{viewModel.isChecked ? View.VISIBLE : View.GONE}"
				android:layout_width="64dp"
				android:layout_height="64dp"
				android:background="@drawable/torrent_type_checked"/>

		</FrameLayout>

		<LinearLayout
			android:layout_width="match_parent"
			android:layout_height="wrap_content"
			android:paddingTop="4dp"
			android:paddingBottom="4dp"
			android:layout_marginEnd="@dimen/activity_horizontal_margin"
			android:orientation="vertical">

			<TextView
				android:layout_width="match_parent"
				android:layout_height="wrap_content"
				android:fontFamily="sans-serif-condensed"
				android:textAppearance="?android:attr/textAppearanceListItem"
				android:textSize="@dimen/torrent_list_name_text_size"
				android:textStyle="bold"
				android:text="@{viewModel.name}"
				tools:text="Torrent Name"/>

			<TextView
				android:layout_width="match_parent"
				android:layout_height="wrap_content"
				android:fontFamily="sans-serif-light"
				android:textAppearance="?android:attr/textAppearanceListItemSmall"
				android:textSize="@dimen/torrent_list_traffic_text_size"
				android:text="@{viewModel.traffic}"
				tools:text="482.72MB of 1.011MB (47.7%) - 22 minutes remaining"/>

			<TextView
				android:layout_width="match_parent"
				android:layout_height="wrap_content"
				android:fontFamily="sans-serif-light"
				android:textAppearanceSmall="?android:attr/textAppearanceListItemSmall"
				android:textSize="@dimen/torrent_list_status_text_size"
				android:text="@{viewModel.status}"
				tools:text="Downloading from 20 of 60 connected peers" />

			<TextView
				android:id="@+id/error_text"
				android:layout_width="match_parent"
				android:layout_height="wrap_content"
				android:ellipsize="marquee"
				android:marqueeRepeatLimit ="marquee_forever"
				android:scrollHorizontally="true"
				android:fontFamily="sans-serif-light"
				android:textColor="@color/error"
				android:textAppearanceSmall="?android:attr/textAppearanceListItemSmall"
				android:textSize="@dimen/torrent_list_error_text_size"
				android:visibility="@{viewModel.hasError ? View.VISIBLE : View.GONE}"
				android:text="@{viewModel.error}"
				tools:text="Error fetching peers"
				tools:visibility="visible" />
		</LinearLayout>

	</LinearLayout>

</layout>
